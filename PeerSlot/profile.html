<!DOCTYPE html>
<html>
<body>

<h2>My Profile</h2>

<div id="profile">Loading...</div>

<br>
<button onclick="location.href='edit-profile.html'">Edit Profile</button>
<button onclick="location.href='dashboard.html'">Back to Dashboard</button>

<script type="module">
import { auth, db } from "./firebase.js";
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

onAuthStateChanged(auth, async (user) => {
  if (!user) {
    window.location.href = "login.html";
    return;
  }

  const snap = await getDoc(doc(db, "users", user.uid));
  if (!snap.exists()) {
    window.location.href = "setup.html";
    return;
  }

  const data = snap.data();

  document.getElementById("profile").innerHTML = `
    <p><b>Name:</b> ${data.name}</p>
    <p><b>Reg No:</b> ${data.reg}</p>
    <p><b>Branch:</b> ${data.branch}</p>
    <p><b>Semester:</b> ${data.sem}</p>
    <p><b>Bio:</b> ${data.bio}</p>
    <p><b>Email:</b> ${data.email}</p>
  `;
});
</script>

</body>
</html>
