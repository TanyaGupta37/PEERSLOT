<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://unpkg.com/lucide@latest"></script>
  <title>PeerSlot Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="availability.css">

  <!-- FullCalendar -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
</head>

<body>

  <div class="dashboard-layout">

    <!-- SIDEBAR -->
    <div class="sidebar">
      <h2>PeerSlot</h2>
      <a class="active" href="dashboard.html">Dashboard</a>
      <a href="#find-peer">Find Peer</a>
      <a href="availability.html">Availability</a>
      <a href="#sessions">My Sessions</a>
      <a href="#peers">My Peers</a>
      <a href="#rewards">Rewards</a>
      <a href="#settings">Settings</a>
    </div>

    <!-- MAIN -->
    <div class="dashboard-main">

      <!-- TOP BAR -->
      <div class="topbar">
        <div class="search-box">
          <i data-lucide="search" class="search-icon"></i>
          <input placeholder="Search subjects, peers, skills...">
        </div>
        <div class="top-icons">
          <div class="bell">
            <i data-lucide="bell"></i>
          </div>
          <div class="avatar" id="avatar">T</div>
        </div>
      </div>

      <!-- WELCOME -->
      <div class="welcome">
        <h1 id="welcome">
          Welcome back, <span id="firstName"></span> <i data-lucide="hand"></i>
        </h1>

        <div class="stats">
          <div class="stat">
            <i data-lucide="star"></i> 4.8 / 5
          </div>

          <div class="stat">
            <i data-lucide="users"></i> Peers helped: 12
          </div>

          <div class="stat">
            <i data-lucide="calendar"></i> Sessions booked: 7
          </div>
        </div>
      </div>


      <!-- GRID -->
      <div class="dashboard-grid">

        <!-- LEFT COLUMN -->
        <div>

          <!-- FIND A PEER -->
          <div class="card" id="find-peer">
            <h3>Find a Peer</h3>
            <div class="find-peer">
              <select id="find-subject">
                <option value="">Subject</option>
                <option>DSA</option>
                <option>Python</option>
                <option>Java</option>
                <option>C / C++</option>
                <option>DBMS</option>
                <option>OS</option>
                <option>CN</option>
                <option>Web Development</option>
                <option>Machine Learning</option>
                <option>Data Science</option>
                <option>AI</option>
                <option>IoT</option>
                <option>Cloud Computing</option>
                <option>Cyber Security</option>
                <option>Blockchain</option>
                <option>Software Engineering</option>
                <option>Aptitude</option>
              </select>

              <select id="find-mode">
                <option value="">Mode</option>
                <option>Online</option>
                <option>In-person</option>
                <option>Either / No preference</option>
              </select>

              <button id="find-peer-btn">Find</button>
            </div>
          </div>

          <!-- CALENDAR -->
          <div class="card">
            <h3>My Calendar</h3>
            <div id="calendar"></div>
          </div>

          <!-- UPCOMING SESSIONS -->
          <div class="card" id="sessions">
            <h3>Upcoming Sessions</h3>

            <div class="session">
              <strong>DSA with Rohan</strong><br>
              Today · 6:00 PM · Confirmed
            </div>

            <div class="session">
              <strong>Python with Ananya</strong><br>
              Tomorrow · 8:00 PM · Pending
            </div>
          </div>

        </div>

        <!-- RIGHT COLUMN -->
        <div>

          <!-- AVAILABILITY MANAGEMENT -->
          <div class="card" id="availability">
            <h3>Your Available Slots</h3>

            <!-- ADD SLOT FORM - Simplified single row -->
            <div class="slot-row">
              <select id="slot-day">
                <option value="">Day</option>
              </select>
              <select id="slot-start-time">
                <option value="">Start</option>
              </select>
              <select id="slot-end-time">
                <option value="">End</option>
              </select>
              <button id="add-slot-btn">Add Slot</button>
            </div>

            <!-- ERROR MESSAGE -->
            <div id="slot-error" style="display: none; color: #dc2626; font-size: 0.85rem; margin-top: 8px;"></div>

            <!-- SLOTS COUNT -->
            <h4 style="margin-top:14px" id="slots-count-header">
              Slots added →
            </h4>
            <div id="slots-count" style="font-size: 0.85rem; color: #64748b; margin-bottom: 8px;"></div>

            <!-- SLOTS LIST -->
            <div id="slots-list">
              <div class="loading-state">
                <p style="color: #94a3b8; font-size: 0.9rem;">Loading slots...</p>
              </div>
            </div>

          </div>

        </div>


      </div>

    </div>

  </div>

  <!-- Dashboard logic -->
  <script type="module" src="dashboard.js"></script>

  <!-- Availability Module -->
  <script type="module">
    import { initAvailabilityUI } from "./availability-ui.js";
    import { initPeerAvailabilityViewer } from "./peer-availability.js";

    // Initialize availability UI
    initAvailabilityUI();
    initPeerAvailabilityViewer();
  </script>

  <!-- Calendar UI -->
  <script src="dashboard-calendar.js"></script>

  <!-- Lucide Icons -->
  <script>
    lucide.createIcons();
  </script>

</body>

</html>